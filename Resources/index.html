<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <title>Proteomics Workbench</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/chosen.css"/>
    <script src="javascript/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
        //this allows us to ignore certain blocks of content
        //when the attribute data-enhance="false" is encountered
        //NOTE: there is a performance penalty with using this... may want to use ajax gets for template data
        $(document).bind("mobileinit", function(){
            $.mobile.ignoreContentEnabled = true;
        });
    </script>
    <script src="javascript/jquery.mobile-1.3.0.js"></script>
    <script src="javascript/mustache.js"></script>
</head>
<body>

<input style="display:none;" id="fileInput" type="file" data-enhance="false" />
<input style="display:none;" id="multipleInput" type="file" multiple data-enhance="false" />
<input style="display:none;" id="directoryInput" type="file" nwdirectory data-enhance="false" />

<input style="display:none;" id="assetInput" type="file" multiple data-enhance="false" />
<input style="display:none;" id="scriptInput" type="file" multiple data-enhance="false" />
<input style="display:none;" id="runtimeInput" type="file" data-enhance="false" />

<div data-role="page" id="projects" class="type-interior" data-title="Projects">
    <div data-role="header">
        <a href="#navPanel" data-role="button" data-icon="bars">Menu</a>
        <h1>Projects</h1>
        <a href="#settings" data-role="button" data-icon="gear">Settings</a>
        <a style="position:absolute; margin-left: 90px;top: 3px;" data-role="button" data-icon="back" data-rel="back">Back</a>
    </div><!-- /header -->

    <div data-role="content">

        <div class="content-primary">
            <a href="#createProjectPopup" data-rel="popup" data-role="button" data-inline="true" data-theme="b" data-position-to="window" style="margin-bottom:1.5em;">Create Project</a>

            <!-- popup for Create Project -->
            <div data-role="popup" id="createProjectPopup" class="ui-content" data-overlay-theme="a">
                <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                <ul data-role="listview" data-inset="true">
                <li data-role="fieldcontain">
                	<label for="createProjectTitle">Title: </label>
                	<input type="text" autofocus="autofocus" class="projectTitle" id="createProjectTitle" value="" >
                </li>
                <li data-role="fieldcontain">
                	<label for="createProjectDesc">Description: </label>
                	<input type="text" class="projectDescription" id="createProjectDesc" value="">
                </li>
                </ul>
                <input type="submit" value="Submit" data-theme="b">
            </div>


        </div>
        <div class="content-secondary">
            <div data-theme="b" data-content-theme="d">
                <ul id="projectList" data-role="listview" data-theme="c" data-dividertheme="d" data-filter="true" data-filter-placeholder="Search projects...">
                </ul>
            </div>
        </div>

    </div><!-- /content -->

    <div id="navPanel" data-role="panel" data-position="left" data-display="overlay" data-theme="a">
        <a href="#navPanel" data-theme="b" data-role="button" data-icon="delete" data-iconpos="notext" data-mini="true" style="float:right;"></a>
        <h3>Navigation panel</h3>
        <a href="#projects" class="ui-btn-active" data-role="button">Projects</a>
        <a href="#scripts" data-role="button">Scripts</a>
    </div>

</div>

<div data-role="page" id="scripts" data-title="Scripts">

    <div data-role="header">
        <a href="#navPanel" data-role="button" data-icon="bars">Menu</a>
        <h1>Scripts</h1>
        <a href="#settings" data-role="button" data-icon="gear">Settings</a>
        <a style="position:absolute; margin-left: 90px;top: 3px;" data-role="button" data-icon="back" data-rel="back">Back</a>
    </div><!-- /header -->

    <div data-role="content">

                <!-- Add Scripts -->
                <input style="display:none;" id="scriptsInputDialog" type="file" multiple data-enhance="false" />
                <a href="#addScriptPopup" data-rel="popup" data-role="button" data-inline="true" data-theme="b" data-position-to="window" style="margin: 0 0 1.5em 0;">Add Script</a>
                <div data-role="popup" id="addScriptPopup" class="ui-content" data-overlay-theme="a">
                    <a href="#scripts" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right close">Close</a>
                    <input type="button" class="chooseScripts" value="Select File" id="scriptFileChooser">
                    <ul id="scriptPickerList" data-role="fieldcontain" style="list-style:none; margin:0; padding:0;">
                    </ul>
                    <input type="submit" data-role="button" data-inline="true" value="Submit" data-theme="b" class="save" />
                    <a href="#scripts" type="button" data-role="button" data-inline="true" value="Cancel" class="close">Cancel</a>
                </div>
		<br>

        <div id="scriptsList">

        </div>

        <div id="tplScriptsListing" style="display:none;" data-enhance="false">
            <div data-role="collapsible-set" data-theme="c" data-content-theme="d">
            	<ul data-role="listview" data-filter="true" data-filter-theme="c" data-filter-placeholder="Search scripts...">
                {{#scripts}}
                <div data-role="collapsible" class="script-{{sid}}">
                    <h3>{{alias}}</h3>
                    <div data-role="fieldcontain">
                        <!--
                        <div style="float:right; margin-top: -4.15em;">
                            <a href="#" data-inline="true" data-mini="true" data-theme="e" data-role="button">Save Script</a>
                            <a href="#" data-id="{{sid}}" class="deleteScript" data-role="button" data-inline="true" data-mini="true" data-theme="a">Delete Script</a>
                        </div>
                        -->
                        <div style="clear:both;"></div>
                        <ul class="scriptProperties" data-role="listview" data-inset="true">
                            <li data-role="fieldcontain">
                                <label for="alias-{{sid}}">Alias: </label>
                                <input id="alias-{{sid}}" data-id="{{sid}}" type="text" data-name="alias" value="{{alias}}" />
                            </li>

                            <li data-role="fieldcontain">
                                <label for="path-{{sid}}" style="float:left;">Path: </label>
                                <div style="width: 78%;position: relative;display: inline-block;">
                                    <input style="float:left;" type="text" id="path-{{sid}}" placeholder="Path to script" data-name="path" data-id="{{sid}}" value="{{path}}" />
                                    <input style="height: 3em; vertical-align: top;" data-role="none" type="button" data-target="path-{{sid}}" class="fileBrowserButton" value="Browse" />
                                </div>
                            </li>

                            <li data-role="fieldcontain">
                                <label for="description-{{sid}}">Description: </label>
                                <textarea data-name="description" name="description-{{sid}}" id="description-{{sid}}" placeholder="A brief description for this script" data-id="{{sid}}">{{description}}</textarea>
                            </li>
                            
                            <li data-role="fieldcontain">
                                <label for="runtimeChooser-{{sid}}">Runtime: </label>
                                <select name="runtimes-{{sid}}" id="runtimeChooser-{{sid}}" data-id="{{sid}}" data-rid="{{rid}}" data-theme="c" data-mini="true" data-native-menu="false">
                                    <option data-placeholder="true">Choose Runtime</option>
                                    {{#runtimes}}
                                    <option value="{{rid}}">{{alias}}</option>
                                    {{/runtimes}}
                                </select>
                                <div style="position: relative;right: 0;width: 100%;text-align: right;margin: .5em 0 0 0;font-size: .75em;"><a href="#settings">Manage Runtimes...</a></div>
                            </li>
                            
                            <li data-role="fieldcontain">
                                <fieldset data-role="controlgroup">
                                    <legend>Does script produce output?</legend>
                                    {{! this conditional block is only here to switch which radio button is checked... there must be a better way }}
                                    {{#produces_output}}
                                        <input type="radio" id="outputYes-{{sid}}" name="produces_output-{{sid}}" data-name="produces_output" data-id="{{sid}}" checked="checked"  value="1" data-role="none" onClick="$(this).siblings('.showHide').fadeIn('fast');" />
                                        <label for="outputYes-{{sid}}">Yes</label>
                                        <input type="radio" id="outputNo-{{sid}}" name="produces_output-{{sid}}" data-name="produces_output" data-id="{{sid}}" value="0" data-role="none" onClick="$(this).siblings('.showHide').fadeOut('fast');" />
                                        <label for="outputNo-{{sid}}">No</label>
                                    {{/produces_output}}
                                    {{^produces_output}}
                                        <input type="radio" id="outputYes-{{sid}}" name="produces_output-{{sid}}" data-name="produces_output" data-id="{{sid}}" value="1" data-role="none" onClick="$(this).siblings('.showHide').fadeIn('fast');" />
                                        <label for="outputYes-{{sid}}">Yes</label>
                                        <input type="radio" id="outputNo-{{sid}}" name="produces_output-{{sid}}" data-name="produces_output" data-id="{{sid}}" checked="checked" value="0" data-role="none" onClick="$(this).siblings('.showHide').fadeOut('fast');" />
                                        <label for="outputNo-{{sid}}">No</label>
                                    {{/produces_output}}

                                    <div id="outputOptions-{{id}}" class="outputOptions showHide {{^produces_output}}hideDefault{{/produces_output}}">
                                        <div>Default Output Directory: </div>
                                        <input type="text" id="outputDirectory-{{sid}}" placeholder="Leave blank for script location. Otherwise specify a path to a directory" data-name="output_directory" data-id="{{sid}}" value="{{output_directory}}" style="float:left;" />
                                        <input type="button" data-role="none" data-target="outputDirectory-{{sid}}" class="dirBrowserButton" value="Browse" style="height: 3em; vertical-align: top;" />
                                        <div style="clear:both;">Regular expression for output: </div>
                                        <input type="text" placeholder="eg: *.txt will find all files ending in .txt" data-name="output_regex" data-id="{{sid}}" value="{{output_regex}}" />
                                    </div>
                                </fieldset>
							</li>

                            <li data-role="fieldcontain" class="argumentContainer">
                                <div id="inputArgumentsList" data-role="collapsible" data-theme="a" data-mini="true">
                                    <h4>Input Arguments</h4>
                                    <div class="argumentsList" data-role="collapsible-set" data-theme="c" data-content-theme="d">
                                        {{#arguments}}
                                        <div class="arg" data-role="collapsible">
                                            <h4>{{label}}</h4>
                                            <div data-role="fieldcontain">
                                                <div style="float:right; margin-top: -4.15em;">
                                                    <a href="#" data-id="{{id}}" data-role="button" data-inline="true" data-mini="true" data-theme="e">Save Argument</a>
                                                    <a href="#" data-id="{{id}}" class="deleteArg" data-role="button" data-inline="true" data-mini="true" data-theme="a">Delete Argument</a>
                                                </div>
                                                <label for="argLabel-{{id}}">Label: </label>
                                                <input type="text" placeholder="Argument Label" id="argLabel-{{id}}" data-id="{{id}}" data-name="label" data-mini="true" value="{{label}}" />
                                                <label for="argSwitch-{{id}}">Switch: </label>
                                                <input type="text" placeholder="Optional Argument Switch (eg: -i)"  data-id="{{id}}" data-name="switch" id="argSwitch-{{id}}" data-mini="true" value="{{switch}}" />
                                                <label for="argDescription-{{id}}">Description: </label>
                                                <input type="text" placeholder="Optional Argument Description" id="argDescription-{{id}}" data-id="{{id}}" data-name="description" value="{{description}}" data-mini="true"/>
                                                <div data-role="fieldcontain">
                                                    <fieldset data-role="controlgroup">
                                                        <legend>Required?</legend>
                                                        {{#required}}
                                                            <input type="checkbox" checked="checked" name="required-{{id}}" data-id="{{id}}" id="required-{{id}}" data-mini="true" />
                                                        {{/required}}
                                                        {{^required}}
                                                            <input type="checkbox" data-name="required" name="required-{{id}}" data-id="{{id}}" id="required-{{id}}" data-mini="true" />
                                                        {{/required}}
                                                        <label for="required-{{id}}">Required</label>
                                                    </fieldset>
                                                </div>
                                                <div data-role="fieldcontain" class="argumentType">
                                                    <fieldset data-role="controlgroup">
                                                        <legend>Argument Type</legend>
                                                        {{#type}}
                                                        <input type="radio" data-name="type" name="type-{{id}}" data-id="{{id}}" value="0" data-role="none" onClick="$(this).closest('.argumentType').siblings('.defaultValue').hide(); $(this).closest('.argumentType').siblings('.allowMultiSelect').fadeIn('fast');" />
                                                        <span>Asset</span>
                                                        <input type="radio" data-name="type" name="type-{{id}}" data-id="{{id}}" value="1" data-role="none" checked="checked" onClick="$(this).closest('.argumentType').siblings('.allowMultiSelect').hide(); $(this).closest('.argumentType').siblings('.defaultValue').fadeIn('fast');" />
                                                        <span>String</span>
                                                        {{/type}}
                                                        {{^type}}
                                                        <input type="radio" data-name="type" name="type-{{id}}" data-id="{{id}}" value="0" data-role="none" checked="checked" onClick="$(this).closest('.argumentType').siblings('.defaultValue').hide(); $(this).closest('.argumentType').siblings('.allowMultiSelect').fadeIn('fast');" />
                                                        <span>Asset</span>
                                                        <input type="radio" data-name="type" name="type-{{id}}" data-id="{{id}}" value="1" data-role="none" onClick="$(this).closest('.argumentType').siblings('.allowMultiSelect').hide(); $(this).closest('.argumentType').siblings('.defaultValue').fadeIn('fast');" />
                                                        <span>String</span>
                                                        {{/type}}
                                                    </fieldset>
                                                </div>
                                                <div data-role="fieldcontain" class="allowMultiSelect {{#type}}hideDefault{{/type}}">
                                                    <fieldset data-role="controlgroup">
                                                        <legend>Allow Multiple Selections?</legend>
                                                        {{#multiselect}}
                                                            <input type="radio" name="multiselect-{{id}}" data-name="multiselect" data-id="{{id}}" checked="checked" value="1" data-role="none" onClick="$(this).siblings('.showHide').fadeIn('fast');" />
                                                            <span for="outputYes">Yes</span>

                                                            <input type="radio" name="multiselect-{{id}}" data-name="multiselect" data-id="{{id}}" value="0" data-role="none" onClick="$(this).siblings('.showHide').fadeOut('fast');" />
                                                            <span for="outputNo">No</span>
                                                        {{/multiselect}}

                                                        {{^multiselect}}
                                                            <input type="radio" name="multiselect-{{id}}" data-name="multiselect" data-id="{{id}}" value="1" data-role="none" onClick="$(this).siblings('.showHide').fadeIn('fast');" />
                                                            <span for="outputYes">Yes</span>

                                                            <input type="radio" name="multiselect-{{id}}" data-name="multiselect" data-id="{{id}}" checked="checked" value="0" data-role="none" onClick="$(this).siblings('.showHide').fadeOut('fast');" />
                                                            <span for="outputNo">No</span>
                                                        {{/multiselect}}


                                                        <div class="showHide {{^multiselect}}hideDefault{{/multiselect}}">
                                                            <div>Default Separator Character</div>
                                                            <input type="text" placeholder="leave blank for space" data-name="separator" data-id="{{id}}" value="{{separator}}" />
                                                        </div>
                                                    </fieldset>
                                                </div>
                                                <div class="defaultValue {{^type}}hideDefault{{/type}}" data-role="fieldcontain">
                                                    <label for="default_value-{{id}}">Default Value: </label>
                                                    <input type="text" placeholder="Default String Value for Argument" data-id="{{id}}" data-name="default_value" name="default_value-{{id}}" id="default_value-{{id}}" data-mini="true" value="{{default_value}}" />
                                                </div>
                                            </div>
                                        </div>
                                        {{/arguments}}
                                    </div>
                                    <a class="addInputArgument" data-id="{{sid}}" data-role="button" data-theme="b" href="#">Add Argument</a>
                                </div>
                            </li>
                        </ul>
                        <div style="float:right; margin-bottom: -1em;">
                            <a href="#" data-inline="true" data-mini="true" data-theme="e" data-role="button">Save Script</a>
                            <a href="#" data-id="{{sid}}" class="deleteScript" data-role="button" data-inline="true" data-mini="true" data-theme="a">Delete Script</a>
                        </div>
                        <div style="clear:both;"></div>
                    </div>
                </div>
                {{/scripts}}
                </ul>
            </div>
        </div>

    </div><!-- /content -->

    <div id="navPanel" data-role="panel" data-position="left" data-display="overlay" data-theme="a">
        <a href="#navPanel" data-theme="b" data-role="button" data-icon="delete" data-iconpos="notext" data-mini="true" style="float:right;"></a>
        <h3>Navigation panel</h3>
        <a href="#projects" data-role="button">Projects</a>
        <a href="#scripts" class="ui-btn-active" data-role="button">Scripts</a>
    </div>

</div><!-- /page -->

<div data-role="page" id="settings" data-title="Settings">
    <div data-role="header">
        <a href="#navPanel" data-role="button" data-icon="bars">Menu</a>
        <h1>Settings</h1>
        <a href="#settings" data-role="button" data-icon="gear">Settings</a>
        <a style="position:absolute; margin-left: 90px;top: 3px;" data-role="button" data-icon="back" data-rel="back">Back</a>
    </div><!-- /header -->

    <div data-role="content">
        <div id="settingsWaiting">Getting settings info...</div>
        <div id="settingsArea">
        <div class="ui-grid-solo">
            <div class="ui-block-a">
                <!-- Add Runtime Popup -->
                <a href="#addRuntimePopup" data-rel="popup" data-role="button" data-inline="true" data-theme="b" data-position-to="window">Add Runtime</a>
                <div data-role="popup" id="addRuntimePopup" class="ui-content" data-overlay-theme="a">
                    <a href="#settings" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right close">Close</a>
                    <input type="button" class="chooseRuntime" value="Select File" id="runtimeFileChooser">
                    <ul id="runtimePickerList" data-role="fieldcontain" style="list-style:none; margin:0; padding:0;">
                    </ul>
                    <div data-role="fieldcontain">
                    Alias: <input type="text" class="runtimeAlias" value=""><br>
                    </div>
                    <input type="submit" data-role="button" data-inline="true" value="Submit" data-theme="b" class="save" />
                    <a href="#settings" type="button" data-role="button" data-inline="true" value="Cancel" class="close"/>Cancel</a>
                </div>
            </div>
        </div>
		<div id="runtimeList">

        </div>
            <div id="tplRuntimesListing" style="display:none;" data-enhance="false">
            <div data-role="collapsible-set" data-theme="c" data-content-theme="d">
                {{#runtimes}}
                <div data-listid="{{rid}}" data-role="collapsible">
                    <h3>{{alias}}</h3>
                    <div data-role="fieldcontain">
                        <ul class="runtimeProperties" data-role="listview" data-inset="true">
                            <li data-role="fieldcontain">
                                <label for="alias-{{rid}}">Alias: </label>
                                <input id="alias-{{rid}}" data-id="{{rid}}" type="text" name="alias" value="{{alias}}" />
                            </li>

                            <li data-role="fieldcontain">
                                <label for="path-{{rid}}">Path: </label>
                                <input type="text" name="path" id="path-{{rid}}" data-id="{{rid}}" value="{{path}}" />
                            </li>
                            </ul>
                        <div style="padding-bottom:20px">
							<a href="#" data-id="{{rid}}" id="deleteRuntime" class="deleteRuntime" data-role="button" data-inline="true" data-mini="true" data-theme="a" style="float:right;">Delete Runtime</a>
                        </div>
                    </div>
                </div>
                {{/runtimes}}
            </div>			
        </div>
        	<div>
                <br>
                <label for="defaultScriptOutput"><h4>Default script output location: </h4></label>
                <input data-role="none" style="display:none" class="inputFix" id="defaultScriptOutput" data-id="defaultScriptOutput" type="text" name="defaultScriptOutput" value="" />
                <span data-role="none" data-enhance="false" style="display:inline-block" id="defaultScriptOutput" class="inputFix" data-id="defaultScriptOutput"></span>
            </div>
        </div> <!-- End settings area -->

        <div id="tagsArea">
            <h2>Tags</h2>
            <div class="tagList">Getting tag info...</div>
        </div>

        <h2>Debug</h2>
        <a href="#resetDatabasePopup" data-rel="popup" data-role="button" data-inline="true" data-theme="e" data-position-to="window">Reset Database</a>
        <div data-role="popup" id="resetDatabasePopup" class="ui-content" data-overlay-theme="a">
            <div data-role="content" data-theme="c" class="ui-corner-bottom ui-content">
                <h3 class="ui-title">Are you sure you want to reset the database?</h3> <p>This is not reversible.</p>
                <p>
                    <span data-role="button" onClick="$('#resetDatabasePopup').popup('close');" data-inline="true" data-rel="back" data-theme="c">Cancel</span>
                    <span onClick="pw.db.reset(); $('#resetDatabasePopup').popup('close');" data-role="button" data-inline="true" data-theme="a">Delete</span>
                </p>
            </div>
        </div>
    </div><!-- /content -->

    <div id="navPanel" data-role="panel" data-position="left" data-display="overlay" data-theme="a">
        <a href="#navPanel" data-theme="b" data-role="button" data-icon="delete" data-iconpos="notext" data-mini="true" style="float:right;"></a>
        <h3>Navigation panel</h3>
        <a href="#projects" data-role="button">Projects</a>
        <a href="#scripts" data-role="button">Scripts</a>
    </div>

</div><!-- /page -->

<div data-role="page" id="project-details" data-title="Project Details">
    <div data-role="header">
        <a href="#navPanel" style="float:left;" data-role="button" data-icon="bars">Menu</a>
        <h1 id="pTitle">Project Details</h1>
        <a href="#settings" data-role="button" data-icon="gear">Settings</a>
        <a style="position:absolute; margin-left: 90px;top: 3px;" data-role="button" data-icon="back" data-rel="back">Back</a>

    </div><!-- /header -->

    <div data-role="content">
        <div style="float:left;">
            <h1 style="margin-top: 0; margin-bottom: .25em;">Project Name</h1>
            <span style="font-style: italic;">Project description would go here lorem ipsum etc</span>
        </div>

        <div style="float:right;">
            <a href="#editProjectPopup" data-rel="popup" data-mini="true" data-role="button" data-inline="true" data-theme="e" data-position-to="window" style="float:right;">Edit Project</a>
            <!-- Popup for editing the title and description -->
            <div data-role="popup" id="editProjectPopup" class="ui-content" data-overlay-theme="a">
                <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                <ul data-role="listview" data-inset="true">
                <li data-role="fieldcontain">
                	<label for="newTitle" style="float:left;">New title: </label>
                	<input type="text" class="newTitle" id="newTitle" value="">
                </li>
                <li data-role="fieldcontain">
                	<label for="newDescription" style="float:left;">New description: </label>
                	<input type="text" class="newDescription" id="newDescription" value="" style="float:right;">
                </li>
                </ul>
                <input type="submit" value="Submit" data-theme="b" id="edit">
            </div>

            <a href="#deleteProjectPopup" data-rel="popup" data-mini="true" data-role="button" data-inline="true" data-theme="a" data-position-to="window" style="float:right;">Delete Project</a>
            <!-- Popup for Delete Project confirmation -->
            <div data-role="popup" id="deleteProjectPopup" class="ui-content" data-overlay-theme="a">
                <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
                    <h3 class="ui-title">Are you sure you want to delete this project?</h3>
                    <a href="#projects" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>
                    <a href="#projects" class="delete" data-role="button" data-inline="true" data-theme="a">Delete</a>
                </div>
            </div>
        </div>
        <div style="clear:both; margin-bottom: 1.5em;"></div>

        <!-- List of Assets -->
        <div class="ui-grid-a">
            <div class="ui-block-a" style="padding-right:10px">
                <!-- Add Assets -->
                <div>
                    <a href="#addAssetPopup" data-rel="popup" data-icon="plus" data-role="button" data-inline="true" data-mini="true" data-theme="b" data-position-to="window">Add Assets</a>
                    <div data-role="popup" id="addAssetPopup" class="ui-content" data-overlay-theme="a">
                        <a href="#" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right close">Close</a>
                        <input type="button" class="chooseFiles" value="Select File(s)">
                        <ul id="assetPickerList" data-role="fieldcontain" style="list-style:none; margin:0; padding:0;">
                        </ul>
                        <input type="button" data-role="button" data-inline="true" value="Submit" data-theme="b" class="save" />
						<input type="button" data-role="button" data-inline="true" value="Cancel" class="close"/>
                    </div>

                    <!-- Delete Assets confirmation -->
                    <a href="#deleteAssetPopup" data-icon="delete" data-rel="popup" data-role="button" data-inline="true" data-mini="true" data-theme="a" data-position-to="window">Delete Selected Assets</a>
                    <div data-role="popup" id="deleteAssetPopup" class="ui-content" data-overlay-theme="a">
                        <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content" style="text-align:center;">
                            <h3 class="ui-title">Are you sure you want to delete the selected asset(s)?</h3>
                            <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>
                            <a href="#projectDetails" class="delete" data-role="button" data-inline="true" data-theme="a">Delete</a>
                        </div>
                    </div>
                </div>
                <div class="ui-body ui-body-b">
                    <fieldset data-role="controlgroup" style="margin-top:0%;">
                        <div data-role="fieldcontain">
                            <select name="sortAssetsBy" class="sortBy" data-theme="c" data-native-menu="false">
                                <option data-placeholder="true">Sort Assets By...</option>
                                <option value="1">Newest</option>
                                <option value="2">Favorites</option>
                                <option value="3">File Type</option>
                                <option value="4">File Name</option>
                            </select>
                        </div>
                        <div id="assetList" class="itemList" data-role="fieldcontain">
                        </div>

                        <!-- TODO: use/apply this template for assets -->
                        <div id="tplProjectDetailsAssets" style="display:none;" data-enhance="false">
                            <ul class="itemList">
                                <!-- TODO: correctly show favorites toggle -->
                                {{#properties.assets}}
                                <li>
                                    <input type="checkbox" data-aid="{{properties.aid}}" name="checkbox-{{properties.aid}}" id="checkbox-{{properties.aid}}" data-theme="c" />
                                    <label for="checkbox-{{properties.aid}}" data-aid="{{properties.aid}}">
                                        {{properties.filename}}

                                        {{#properties.fav}}
                                        <a class="itemButton fav" data-aid="{{properties.aid}}" data-fav="{{properties.fav}}" data-role="button" data-icon="star" data-iconpos="notext" data-mini="true" data-inline="true" data-theme="e">Favorite</a>
                                        {{/properties.fav}}
                                        {{^properties.fav}}
                                        <a class="itemButton fav" data-aid="{{properties.aid}}" data-fav="0" data-role="button" data-icon="star" data-iconpos="notext" data-mini="true" data-inline="true" data-theme="c">Favorite</a>
                                        {{/properties.fav}}

                                        <span class="itemButton detailsButton" data-aid="{{properties.aid}}" data-id="{{properties.aid}}" data-role="button" data-icon="gear" data-iconpos="notext" data-mini="true" data-inline="true" data-theme="c">Edit</span>
                                    </label>
                                </li>
                                {{/properties.assets}}
                            </ul>
                        </div>

                    </fieldset>
                </div>
            </div>
            <div class="ui-block-b" style="padding-left:10px">
                <div class="ui-body ui-body-b" style="margin-top: 40px;">
                    <fieldset data-role="controlgroup" style="margin-top:0%;">
                        <div data-role="fieldcontain">
                            <select name="sortBy" class="sortBy" data-theme="c" data-native-menu="false">
                                <option data-placeholder="true">Sort Scripts By...</option>
                                <option value="date">Newest</option>
                                <option value="favorites">Favorites</option>
                                <option value="type">File Type</option>
                                <option value="favorites">File Name</option>
                            </select>
                        </div>
                        <div id="scriptList-project">
                        </div>
                        <div id="tplProjectDetailsScripts" style="display:none;" data-enhance="false">
                            <ul data-theme="c" data-dividertheme="d">
                                {{#scripts}}
                                <li data-sid="{{sid}}"><a href="#scriptExe?sid={{sid}}">{{alias}}{{#description}}<div class="scriptDescriptionSmall">{{description}}</div>{{/description}}</a></li>
                                {{/scripts}}
                            </ul>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>

    </div><!-- /content -->

    <div id="navPanel" data-role="panel" data-position="left" data-display="overlay" data-theme="a">
        <a href="#navPanel" data-theme="b" data-role="button" data-icon="delete" data-iconpos="notext" data-mini="true" style="float:right;"></a>
        <h3>Navigation panel</h3>
        <a href="#projects" data-role="button">Projects</a>
        <a href="#scripts" data-role="button">Scripts</a>
    </div>

</div><!-- /page -->

<div data-role="page" id="scriptExe" data-title="Script Execution">

    <div data-role="header">
        <a href="#navPanel" data-role="button" data-icon="bars">Menu</a>
        <h1>Script Execution</h1>
        <a href="#settings" data-role="button" data-icon="gear">Settings</a>
        <a style="position:absolute; margin-left: 90px;top: 3px;" data-role="button" data-icon="back" data-rel="back">Back</a>
    </div><!-- /header -->

    <div data-role="content">

        <div id="scriptExeAssetList">

        </div>

        <div id="tplScriptExeAssetList" style="display:none;" data-enhance="false">

            <h1 class="scriptTitle">{{alias}}</h1>
            <span class='scriptDescription'>{{description}}</span>

            <h2>Arguments</h2>

            {{#arguments}}
            <fieldset class="argument" data-label="{{label}}" data-switch="{{switch}}" data-required="{{required}}" data-type="{{type}}" data-multi="{{multiselect}}"data-role="controlgroup" style="margin-top:2%;">
                <div class="ui-body ui-body-b {{#required}}required{{/required}}">
                    <h3>{{label}} {{#switch}}({{switch}}){{/switch}}</h3>

                    {{#description}}<span class="scriptDescription">{{description}}</span>{{/description}}

                    {{ !type of argument is an asset }}
                    {{^type}}
                        {{ !this is where the list of assets will go }}
                        {{#multiselect}}
                            <div data-role="fieldcontain">
                                <label for="separator-{{id}}">String Separator</label>
                                <input type="text" value="{{separator}}" id="separator-{{id}}" />
                            </div>
                        {{/multiselect}}
                        <div class="argAssetList scrollBar" data-role="fieldcontain" data-id="{{id}}" data-multiselect="{{multiselect}}">
                            {{#multiselect}}
                                {{ !id format is: asset-argumentID-assetID }}
                                <fieldset data-role="controlgroup">
                                    <legend>Choose Assets</legend>
                                    {{#assets}}
                                    <input type="checkbox" name="asset-{{id}}" id="asset-{{id}}-{{properties.aid}}" value="{{properties.filename}}" data-path="{{properties.path}}" data-theme="c" data-fav="{{properties.fav}}" />
                                    <label for="asset-{{id}}-{{properties.aid}}">{{properties.filename}}</label>
                                    {{/assets}}
                                </fieldset>
                            {{/multiselect}}

                            {{^multiselect}}
                                <fieldset data-role="controlgroup">
                                    <legend>Choose Asset</legend>
                                    {{#assets}}
                                        <input type="radio" name="asset-{{id}}" id="asset-{{id}}-{{properties.aid}}" value="{{properties.filename}}" data-path="{{properties.path}}" data-theme="c" data-fav="{{properties.fav}}" />
                                        <label for="asset-{{id}}-{{properties.aid}}">{{properties.filename}}</label>
                                    {{/assets}}
                                </fieldset>
                            {{/multiselect}}
                        </div>
                    {{/type}}

                    {{ !type of argument is a string }}
                    {{#type}}
                        <div class="argStringValue" data-role="fieldcontain" data-id="{{id}}">
                            <label for="argStringValue-{{id}}">Argument Value</label>
                            <input type="text" class="argValue" id="argStringValue-{{id}}" value="{{default_value}}" />
                        </div>
                    {{/type}}
                </div>
            </fieldset>
            {{/arguments}}

            {{#produces_output}}
            <h2>Output Options</h2>
            <div data-role="fieldcontain">
                <label for="scriptExeOutputDir">Output Directory</label>
                <input type="text" id="scriptExeOutputDir" value="{{output_directory}}" />

                <label for="scriptExeRegex">Filename Regular Expression</label>
                <input type="text" id="scriptExeRegex" value="{{output_regex}}" />
            </div>
            {{/produces_output}}
        </div>
        <div>
            <h2>Extra Arguments</h2>
            <input type="text" name="extraArguments" id="extraArguments" value="" />
        </div>
        <a href="#runScript" data-rel="popup" data-role="button" data-inline="true" data-theme="e" data-position-to="window" style="float:left;">Run Script</a>
        <a href="#" id="clearLog" data-role="button" data-inline="true" data-theme="e" data-position-to="window" style="float:right;">Clear Log</a>
        <!-- Run Script Popup -->
        <div data-role="popup" id="runScript" class="ui-content" data-overlay-theme="a">
            <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
                <h3 class="ui-title">Run this script?</h3>
                <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>
                <a href="#" id="run" data-role="button" data-inline="true" data-theme="e">Run</a>
            </div>
        </div>
        <div data-role="fieldcontain" style="padding-top:20px;">
            <label for="scriptOut"><b>Script output:</b></label>
            <textarea id="scriptOut"></textarea>
        </div>

    </div><!-- /content -->

    <div id="navPanel" data-role="panel" data-position="left" data-display="overlay" data-theme="a">
        <a href="#navPanel" data-theme="b" data-role="button" data-icon="delete" data-iconpos="notext" data-mini="true" style="float:right;"></a>
        <h3>Navigation panel</h3>
        <a href="#projects" data-role="button">Projects</a>
        <a href="#scripts" data-role="button">Scripts</a>
    </div>

</div><!-- /page -->

</body>
<script src="javascript/pouchdb.min.js"></script>
<script src="javascript/pw/pw.utilities.js"></script>
<script src="javascript/pw/pw.js"></script>
<script src="javascript/pw/pw.db.js"></script>
<script src="javascript/pw/model/pw.model.projects.js"></script>
<script src="javascript/pw/model/pw.model.scripts.js"></script>
<script src="javascript/pw/model/pw.model.assets.js"></script>
<script src="javascript/pw/model/pw.model.settings.js"></script>
<script src="javascript/pw/model/pw.model.tags.js"></script>
<script src="javascript/pw/model/pw.model.runtimes.js"></script>
<script src="javascript/pw/view/pw.view.common.js"></script>
<script src="javascript/pw/view/pw.view.assets.js"></script>
<script src="javascript/pw/view/pw.view.projects.js"></script>
<script src="javascript/pw/view/pw.view.projectDetails.js"></script>
<script src="javascript/pw/view/pw.view.scriptExecution.js"></script>
<script src="javascript/pw/view/pw.view.scripts.js"></script>
<script src="javascript/pw/view/pw.view.settings.js"></script>
<script src="javascript/pw/view/pw.view.templates.js"></script>
<script src="javascript/chosen.jquery.min.js"></script>

<script src="javascript/nw-desktop-notifications.js"></script>
</html>
